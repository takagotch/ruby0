/***
 * Excerpted from "CoffeeScript: Accelerated JavaScript Development, Second Edition",
 * published by The Pragmatic Bookshelf.
 * Copyrights apply to this code. It may not be used to create training material, 
 * courses, books, articles, and the like. Contact us if you are in doubt.
 * We make no guarantees that this code is fit for any purpose. 
 * Visit http://www.pragmaticprogrammer.com/titles/tbcoffee2 for more book information.
***/
'use strict';

module.exports = function (t, a, d) {
	var data, count = 0
	  , x = function (a, b, c) { data = [this, a, b, c, ++count]; }
	  , y = t(x, 200), z = {};

	a(data, undefined, "Setup");
	y.call(z, 111, 'foo', false);
	a(data, undefined, "Immediately");
	setTimeout(function () {
		a(data, undefined, "100ms");
		setTimeout(function () {
			a.deep(data, [z, 111, 'foo', false, 1], "250ms");
			data = null;
			clearTimeout(y());
			setTimeout(function () {
				a(data, null, "Clear");
				d();
			}, 300);
		}, 150);
	}, 100);
};
