/***
 * Excerpted from "CoffeeScript: Accelerated JavaScript Development, Second Edition",
 * published by The Pragmatic Bookshelf.
 * Copyrights apply to this code. It may not be used to create training material, 
 * courses, books, articles, and the like. Contact us if you are in doubt.
 * We make no guarantees that this code is fit for any purpose. 
 * Visit http://www.pragmaticprogrammer.com/titles/tbcoffee2 for more book information.
***/
var Glob = require("../glob.js").Glob
var test = require('tap').test

test('globstar should not have dupe matches', function(t) {
  var pattern = 'a/**/[gh]'
  var g = new Glob(pattern, { cwd: __dirname })
  var matches = []
  g.on('match', function(m) {
    console.error('match %j', m)
    matches.push(m)
  })
  g.on('end', function(set) {
    console.error('set', set)
    matches = matches.sort()
    set = set.sort()
    t.same(matches, set, 'should have same set of matches')
    t.end()
  })
})
